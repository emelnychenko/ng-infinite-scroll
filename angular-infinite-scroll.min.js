angular.module("fx.infinite.scroll",[]).factory("fxScrollFactory",["$window",function(a){var b={offset:void 0,calculate:function(a,c){b.offset=parseInt(window.getComputedStyle(a[0],null).getPropertyValue("height").replace(/px/,""))-window.innerHeight-(c?c:50)},group:{current:"default",dependence:new Object},chain:new Object,append:function(a,c){b.chain[a]=!1,b.group.dependence[a]=c?c:"default"},renew:function(a){b.chain[a]&&(b.chain[a]=!1),b.offset=void 0},switch:function(a){b.group.current=a,b.offset=void 0}};return b}]).directive("fxScroll",["fxScrollFactory","$parse",function(a,b){return{restrict:"A",link:function(b,c,d){var f=d.fxScroll,g=d.fxScrollGroup,h=!!d.fxScrollReverse,i=!1,j=b.$eval(d.fxScrollFn);g=g?g:"default",a.append(f,g),angular.element(d.fxScrollRoot?document.querySelector(d.fxScrollRoot):window).bind("scroll",function(){a.offset||a.calculate(c,d.fxScrollDist),i=this.pageYOffset||this.scrollTop,(h?a.offset>i:a.offset<i)&&(a.chain[f]||a.group.current!==g||(a.chain[f]=!0,j&&j(function(){a.chain[f]=!1,a.calculate(c,d.fxScroll)})))})}}}]);
